(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77],{2077:(e,t,r)=>{Promise.resolve().then(r.bind(r,1375)),Promise.resolve().then(r.bind(r,9069))},2216:(e,t,r)=>{"use strict";r.d(t,{o:()=>a});var s=r(3415);let a=s.z.object({first_name:s.z.string().min(2,{message:"Имя должно содержать не менее 2-х символов"}),last_name:s.z.string().min(2,{message:"Фамилия должна содержать не менее 2-х символов"}),email:s.z.string().email({message:"Введите корректную почту"}),phone_number:s.z.string().min(10,{message:"Введите корректный номер телефона"})})},1375:(e,t,r)=>{"use strict";r.d(t,{Footer:()=>d});var s=r(5155),a=r(2115),n=r(8173),l=r.n(n),o=r(5565),i=r(9602),c=r(147);let d=e=>{let{className:t}=e,[r,n]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{n(!0)},[]),r)?(0,s.jsx)("footer",{className:(0,i.cn)("bg-red-200 w-full",t),children:(0,s.jsxs)(c.m,{className:"flex flex-col md:flex-row items-start md:items-center justify-between py-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 mb-10 md:mb-0",children:[(0,s.jsx)("p",{className:"text-sm text-gray-800",children:"ИП Симонова Татьяна Юрьевна (ИНН 590301561875)"}),(0,s.jsx)("p",{className:"text-sm text-gray-800",children:"Адрес компании: Валенсия, 614031 г. Пермь, ул. Докучаева, 50б"}),(0,s.jsxs)("p",{className:"text-sm text-gray-800",children:["Email:"," ",(0,s.jsx)(l(),{href:"mailto:valensia_sweet@mail.ru",className:"text-blue-600 hover:underline",children:"valensia_sweet@mail.ru"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-800",children:"Время работы: понедельник-пятница, с 8:00 до 21:00"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 mb-10 md:mb-0 text-start",children:[(0,s.jsx)(l(),{href:"/vacansies",className:"font-bold text-lg",children:"Вакансии"}),(0,s.jsx)(l(),{href:"/addresses",className:"font-bold text-lg",children:"Адреса магазинов"}),(0,s.jsx)(l(),{href:"/public-offer.pdf",target:"_blank",rel:"noopener noreferrer",className:"font-bold text-lg",children:"Публичная оферта"}),(0,s.jsx)(l(),{href:"https://vk.com/valencia_sweet",target:"_blank",rel:"noopener noreferrer",className:"font-bold text-lg",children:"Группа ВКонтакте"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[(0,s.jsx)(l(),{href:"/",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(o.default,{src:"/assets/images/box.png",alt:"Логотип компании",width:80,height:80}),(0,s.jsx)("h1",{className:"text-2xl uppercase font-black",children:"Valencia"})]})}),(0,s.jsx)("div",{className:"mt-2 text-2xl font-bold",children:"+7 (950) 443-30-24"})]})]})}):null}},389:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var s=r(5155),a=r(9606),n=r(2115),l=r(9602);let o=n.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});o.displayName="Input";var i=r(689);let c=e=>{let{onClick:t,className:r}=e;return(0,s.jsx)("button",{onClick:t,className:(0,l.cn)("absolute right-4 top-1/2 -translate-y-1/2 opacity-30 hover:opacity-100 cursor-pointer",r),children:(0,s.jsx)(i.A,{className:"h-5 w-5"})})},d=e=>{let{text:t,className:r}=e;return(0,s.jsx)("p",{className:(0,l.cn)("text-red-500 text-sm",r),children:t})},u=()=>(0,s.jsx)("span",{className:"text-red-500",children:"*"}),m=e=>{var t;let{className:r,name:n,label:l,required:i,...m}=e,{register:f,formState:{errors:x},watch:p,setValue:h}=(0,a.xW)(),v=p(n),g=null===(t=x[n])||void 0===t?void 0:t.message;return(0,s.jsxs)("div",{className:r,children:[l&&(0,s.jsxs)("p",{className:"font-medium mb-2",children:[l," ",i&&(0,s.jsx)(u,{})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o,{className:"h-12 text-md",...f(n),...m}),v&&(0,s.jsx)(c,{onClick:()=>{h(n,"",{shouldValidate:!0})}})]}),g&&(0,s.jsx)(d,{text:g,className:"mt-2"})]})};n.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})}).displayName="Textarea"},9069:(e,t,r)=>{"use strict";r.d(t,{Header:()=>ef});var s=r(5155),a=r(9602),n=r(2115),l=r(147),o=r(5565),i=r(8173),c=r.n(i),d=r(6307),u=r(4057);let m=(0,u.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var f=["mousedown","touchstart"];let x=function(e,t,r){void 0===r&&(r=f);var s=(0,n.useRef)(t);(0,n.useEffect)(function(){s.current=t},[t]),(0,n.useEffect)(function(){for(var t=function(t){var r=e.current;r&&!r.contains(t.target)&&s.current(t)},a=0,n=r;a<n.length;a++)!function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(document,n[a],t);return function(){for(var e=0,s=r;e<s.length;e++)!function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(document,s[e],t)}},[r,e])};var p=r(5730),h=r(6467);let v=e=>{let{className:t}=e,[r,l]=(0,n.useState)(""),[o,i]=(0,n.useState)(!1),[c,u]=(0,n.useState)([]),[f,v]=(0,n.useState)(null),[g,j]=(0,n.useState)(!1),b=(0,n.useRef)(null);x(b,()=>{i(!1)}),function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=[]);var s,a,l,o,i,c,d,u=(void 0===(s=t)&&(s=0),a=(0,n.useRef)(!1),l=(0,n.useRef)(),o=(0,n.useRef)(e),i=(0,n.useCallback)(function(){return a.current},[]),c=(0,n.useCallback)(function(){a.current=!1,l.current&&clearTimeout(l.current),l.current=setTimeout(function(){a.current=!0,o.current()},s)},[s]),d=(0,n.useCallback)(function(){a.current=null,l.current&&clearTimeout(l.current)},[]),(0,n.useEffect)(function(){o.current=e},[e]),(0,n.useEffect)(function(){return c(),d},[s]),[i,d,c]),m=(u[0],u[1],u[2]);(0,n.useEffect)(m,r)}(async()=>{try{console.log(r);let e=await d.j.products.search({name:r});u(e)}catch(e){console.log(e)}},250,[r]),(0,n.useEffect)(()=>{let e=()=>j(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let y=e=>{v(e),i(!1),l(""),u([])};return(0,s.jsxs)(s.Fragment,{children:[o&&(0,s.jsx)("div",{className:"fixed top-0 left-0 bottom-0 right-0 bg-black/50 z-30"}),(0,s.jsxs)("div",{ref:b,className:(0,a.cn)("flex rounded-2xl flex-1 justify-between relative h-11 z-30",t),children:[(0,s.jsx)(m,{className:"absolute top-1/2 translate-y-[-50%] left-3 h-5 text-gray-400"}),(0,s.jsx)("input",{className:"rounded-2xl outline-none w-full bg-gray-100 pl-11 border border-transparent hover:border-gray-400 focus:border-primary focus:border-[3px] transition-colors duration-300",type:"text",placeholder:"Найти тортик...",onFocus:()=>i(!0),value:r,onChange:e=>l(e.target.value)}),c.length>0&&(0,s.jsx)("div",{className:(0,a.cn)("absolute w-full bg-white rounded-xl py-2 top-14 shadow-md transition-all duration-200 invisible opacity-0 z-30",o&&"visible opacity-100 top-12"),children:c.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 w-full px-3 py-2 hover:bg-primary/10 cursor-pointer",onClick:()=>y(e),children:[(0,s.jsx)("img",{className:"rounded-sm h-8 w-8",src:e.image,alt:e.name}),(0,s.jsx)("span",{children:e.name})]},e.id))})]}),f&&!g&&(0,s.jsx)(p.F,{product:f,onClose:()=>v(null)}),f&&g&&(0,s.jsx)(h.T,{product:f,onClose:()=>v(null)})]})};var g=r(6870);let j=(0,u.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var b=r(3610),y=r(8068),N=r(8166),w=r(9674),C=r(2292),k=r(196),E=r(7668),R=r(905),_=r(7323),P=r(7028),A=r(3360),F=r(2317),O=r(1488),S=r(5587),z=r(4065),D="Popover",[T,I]=(0,N.A)(D,[R.Bk]),L=(0,R.Bk)(),[M,Z]=T(D),q=e=>{let{__scopePopover:t,children:r,open:a,defaultOpen:l,onOpenChange:o,modal:i=!1}=e,c=L(t),d=n.useRef(null),[u,m]=n.useState(!1),[f=!1,x]=(0,O.i)({prop:a,defaultProp:l,onChange:o});return(0,s.jsx)(R.bL,{...c,children:(0,s.jsx)(M,{scope:t,contentId:(0,E.B)(),triggerRef:d,open:f,onOpenChange:x,onOpenToggle:n.useCallback(()=>x(e=>!e),[x]),hasCustomAnchor:u,onCustomAnchorAdd:n.useCallback(()=>m(!0),[]),onCustomAnchorRemove:n.useCallback(()=>m(!1),[]),modal:i,children:r})})};q.displayName=D;var V="PopoverAnchor";n.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,l=Z(V,r),o=L(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=l;return n.useEffect(()=>(i(),()=>c()),[i,c]),(0,s.jsx)(R.Mz,{...o,...a,ref:t})}).displayName=V;var W="PopoverTrigger",B=n.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,n=Z(W,r),l=L(r),o=(0,y.s)(t,n.triggerRef),i=(0,s.jsx)(A.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":et(n.open),...a,ref:o,onClick:(0,b.m)(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?i:(0,s.jsx)(R.Mz,{asChild:!0,...l,children:i})});B.displayName=W;var G="PopoverPortal",[J,U]=T(G,{forceMount:void 0}),H=e=>{let{__scopePopover:t,forceMount:r,children:a,container:n}=e,l=Z(G,t);return(0,s.jsx)(J,{scope:t,forceMount:r,children:(0,s.jsx)(P.C,{present:r||l.open,children:(0,s.jsx)(_.Z,{asChild:!0,container:n,children:a})})})};H.displayName=G;var X="PopoverContent",$=n.forwardRef((e,t)=>{let r=U(X,e.__scopePopover),{forceMount:a=r.forceMount,...n}=e,l=Z(X,e.__scopePopover);return(0,s.jsx)(P.C,{present:a||l.open,children:l.modal?(0,s.jsx)(K,{...n,ref:t}):(0,s.jsx)(Q,{...n,ref:t})})});$.displayName=X;var K=n.forwardRef((e,t)=>{let r=Z(X,e.__scopePopover),a=n.useRef(null),l=(0,y.s)(t,a),o=n.useRef(!1);return n.useEffect(()=>{let e=a.current;if(e)return(0,S.Eq)(e)},[]),(0,s.jsx)(z.A,{as:F.DX,allowPinchZoom:!0,children:(0,s.jsx)(Y,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,b.m)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),o.current||null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,b.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,s=2===t.button||r;o.current=s},{checkForDefaultPrevented:!1}),onFocusOutside:(0,b.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),Q=n.forwardRef((e,t)=>{let r=Z(X,e.__scopePopover),a=n.useRef(!1),l=n.useRef(!1);return(0,s.jsx)(Y,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,n;null===(s=e.onCloseAutoFocus)||void 0===s||s.call(e,t),t.defaultPrevented||(a.current||null===(n=r.triggerRef.current)||void 0===n||n.focus(),t.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:t=>{var s,n;null===(s=e.onInteractOutside)||void 0===s||s.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"!==t.detail.originalEvent.type||(l.current=!0));let o=t.target;(null===(n=r.triggerRef.current)||void 0===n?void 0:n.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&l.current&&t.preventDefault()}})}),Y=n.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,f=Z(X,r),x=L(r);return(0,C.Oh)(),(0,s.jsx)(k.n,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:l,children:(0,s.jsx)(w.qW,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:(0,s.jsx)(R.UC,{"data-state":et(f.open),role:"dialog",id:f.contentId,...x,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ee="PopoverClose";function et(e){return e?"open":"closed"}n.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,n=Z(ee,r);return(0,s.jsx)(A.sG.button,{type:"button",...a,ref:t,onClick:(0,b.m)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=ee,n.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,n=L(r);return(0,s.jsx)(R.i3,{...n,...a,ref:t})}).displayName="PopoverArrow";let er=n.forwardRef((e,t)=>{let{className:r,align:n="center",sideOffset:l=4,...o}=e;return(0,s.jsx)(H,{children:(0,s.jsx)($,{ref:t,align:n,sideOffset:l,className:(0,a.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...o})})});er.displayName=$.displayName;var es=r(4085),ea=r(9606),en=r(2679),el=r(2216),eo=r(389),ei=r(5037);let ec="orderHistory",ed=()=>{let e=(0,ea.mN)({resolver:(0,en.u)(el.o),defaultValues:{email:"",first_name:"",last_name:"",phone_number:""}}),{submitting:t,submitPrivateCakeOrder:r}=function(){let[e,t]=(0,n.useState)(!1);return{submitting:e,submitPrivateCakeOrder:async e=>{if(!function(){let e=Date.now(),t=localStorage.getItem(ec),r=t?JSON.parse(t):[];return!((r=r.filter(t=>e-t<864e5)).length>=100)&&(r.push(e),localStorage.setItem(ec,JSON.stringify(r)),!0)}()){ei.Ay.error("Превышено количество заказов за последние 24 часа.");return}let r=function(e){if(document.cookie&&""!==document.cookie){let t=document.cookie.split(";");for(let r=0;r<t.length;r++){let s=t[r].trim();if(s.startsWith(e+"="))return decodeURIComponent(s.substring(e.length+1))}}}("csrftoken");if(!r){ei.Ay.error("Отсутствует CSRF токен. Перезагрузите страницу.");return}try{t(!0);let s={...e,order_items:[]},a=await fetch("http://127.0.0.1:8000/api/orders/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":r},credentials:"include",body:JSON.stringify(s)});if(!a.ok){let e=await a.json();throw Error(e.detail||"Ошибка сервера при оформлении заказа")}ei.Ay.success("Заказ частного тортика успешно оформлен!"),setTimeout(()=>{location.href="/"},100)}catch(e){console.error("Ошибка сети:",e),ei.Ay.error("Ошибка при оформлении заказа: "+e)}finally{t(!1)}}}}();return(0,s.jsx)(ea.Op,{...e,children:(0,s.jsxs)(q,{children:[(0,s.jsx)(B,{asChild:!0,children:(0,s.jsx)(es.$,{variant:"secondary",className:"px-3 py-1 text-primary transition-colors duration-300 hover:bg-primary/30",children:"Заказать тортик"})}),(0,s.jsx)(er,{className:"w-80 overflow-y-auto",children:(0,s.jsx)("form",{onSubmit:e.handleSubmit(r),children:(0,s.jsxs)("div",{className:"grid gap-7",children:[(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)("h4",{className:"font-medium leading-none",children:"Тортик сделанный для вас!"})}),(0,s.jsxs)("div",{className:"grid gap-5",children:[(0,s.jsxs)("div",{className:"grid grid-row gap-5",children:[(0,s.jsx)(eo.Z,{name:"first_name",className:"text-base",placeholder:"Имя"}),(0,s.jsx)(eo.Z,{name:"last_name",className:"text-base",placeholder:"Фамилия"}),(0,s.jsx)(eo.Z,{name:"email",className:"text-base",placeholder:"E-Mail"}),(0,s.jsx)(eo.Z,{name:"phone_number",className:"text-base",placeholder:"Телефон"})]}),(0,s.jsx)(es.$,{type:"submit",variant:"outline",disabled:t,children:"Отправить"})]})]})})})]})})};var eu=r(3516);let em=()=>(0,s.jsxs)(g.cj,{children:[(0,s.jsx)(g.CG,{asChild:!0,children:(0,s.jsx)("button",{className:"p-2 md:hidden",children:(0,s.jsx)(j,{size:24})})}),(0,s.jsxs)(g.h,{side:"left",className:"bg-[#F4F1EE]",children:[(0,s.jsx)(g.Fm,{className:"flex items-start justify-between",children:(0,s.jsx)(g.qp,{children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(o.default,{src:"/assets/images/box.png",alt:"Логотип",width:35,height:35}),(0,s.jsx)(g.Qs,{children:(0,s.jsx)("span",{className:"text-2xl font-extrabold uppercase text-black",children:"Valencia"})})]})})}),(0,s.jsx)("hr",{className:"my-8"}),(0,s.jsxs)("nav",{className:"flex flex-col space-y-4",children:[(0,s.jsx)(eu.h,{text:"Меню",size:"md",className:"font-extrabold"}),(0,s.jsx)(c(),{href:"/about",className:"text-lg",children:"О нас"})]}),(0,s.jsx)("hr",{className:"my-8"}),(0,s.jsx)("div",{className:"flex flex-col mt-14",children:(0,s.jsx)(ed,{})})]})]}),ef=e=>{let{hasSearch:t=!0,hasDop:r=!0,className:n}=e;return(0,s.jsx)("header",{className:(0,a.cn)("border-b",n),children:(0,s.jsxs)(l.m,{className:"flex flex-col md:flex-row items-center justify-between py-8",children:[(0,s.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,s.jsx)(c(),{href:"/",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(o.default,{src:"/assets/images/box.png",alt:"Empty cart",width:35,height:35}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl uppercase font-black",children:"Valencia"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 leading-3",children:"Лучшие тортики только для вас!"})]})]})}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)(em,{})})]}),t&&(0,s.jsx)("div",{className:"w-full mt-10 md:mt-0",children:(0,s.jsx)(v,{})}),r&&(0,s.jsx)("div",{className:"hidden md:flex w-full mt-6 md:mt-0 gap-20 items-center justify-start md:justify-end",children:(0,s.jsx)(ed,{})})]})})}}}]);