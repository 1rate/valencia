(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{1699:(e,s,t)=>{Promise.resolve().then(t.bind(t,2873))},2873:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>V});var r=t(5155),l=t(2115),a=t(147),i=t(3516),n=t(9602);let c=(0,t(9827).v)()(e=>({activeId:1,setActiveId:s=>e({activeId:s})})),d=e=>{let{items:s,className:t}=e,a=c(e=>e.activeId),i=(0,l.useRef)(null),d=(0,l.useRef)({});(0,l.useEffect)(()=>{if(a&&d.current[a]){var e;null===(e=d.current[a])||void 0===e||e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[a]);let o=(e,s)=>{e.preventDefault();let t=document.getElementById(s);if(t){let e=t.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:e-150,behavior:"smooth"})}};return(0,r.jsx)("div",{ref:i,className:(0,n.cn)("inline-flex gap-1 bg-gray-50 p-1 rounded-2xl overflow-x-auto",t),children:s.map(e=>{let{name:s,id:t}=e;return(0,r.jsx)("a",{ref:e=>{d.current[t]=e},href:"/#".concat(s),onClick:e=>o(e,s),className:(0,n.cn)("flex items-center font-bold h-11 rounded-2xl px-5 whitespace-nowrap transition-colors duration-300 md:hover:text-primary",a===t&&"bg-white shadow-md shadow-gray-200 text-primary"),children:s},t)})})};var o=t(4085),x=t(4057);let m=(0,x.A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var h=t(2884),u=t(5565),p=t(8173),j=t.n(p);let f=(0,x.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var y=t(6870),g=t(8182);let v=(0,x.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),b=e=>{let{imageUrl:s,name:t,price:l,quantity:a,details:i,disabled:c,onClickCountButton:d,onClickRemove:o,className:x}=e;return(0,r.jsxs)("div",{className:(0,n.cn)("flex flex-col md:flex-row bg-white p-4 md:p-5 gap-4 md:gap-6",{"opacity-50 pointer-events-none":c},x),children:[(0,r.jsx)("div",{className:"w-24 md:w-24",children:(0,r.jsx)(g._V,{src:s,className:"h-24 w-full object-cover rounded-sm"})}),(0,r.jsxs)("div",{className:"flex-1 ",children:[(0,r.jsx)(g.R2,{name:t,details:i}),(0,r.jsx)("hr",{className:"my-3"}),(0,r.jsxs)("div",{className:"flex flex-row md:flex-row items-center justify-between",children:[(0,r.jsx)(g.Qr,{onClick:d,value:a}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-2 md:mt-0",children:[(0,r.jsx)(g.gm,{value:l}),(0,r.jsx)(v,{onClick:o,className:"text-gray-400 cursor-pointer hover:text-gray-600",size:16})]})]})]})]})};var N=t(4205),w=t(3543);let k=e=>{let{children:s}=e,{totalAmount:t,updateItemQuantity:a,items:c,removeCartItem:d,hydrateCart:x}=(0,N._)(),[m,p]=l.useState(!1);l.useEffect(()=>{x()},[x]);let g=(e,s,t)=>{a(e,"plus"===t?s+1:s-1)};return(0,r.jsxs)(y.cj,{children:[(0,r.jsx)(y.CG,{asChild:!0,children:s}),(0,r.jsx)(y.h,{className:"flex flex-col justify-between pb-0 bg-[#F4F1EE]",children:(0,r.jsxs)("div",{className:(0,n.cn)("flex flex-col h-full",!t&&"justify-center"),children:[t>0?(0,r.jsx)(y.Fm,{children:(0,r.jsxs)(y.qp,{children:["В корзине ",(0,r.jsxs)("span",{className:"font-bold",children:[c.length," ",1===c.length?"товар":"товара"]})]})}):(0,r.jsx)(w.s,{children:(0,r.jsx)(y.Fm,{children:(0,r.jsx)(y.qp,{children:"Корзина пуста"})})}),0===c.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center md:w-72 mx-auto",children:[(0,r.jsx)(u.default,{src:"/assets/images/box.png",alt:"Empty cart",width:120,height:120}),(0,r.jsx)(i.h,{size:"sm",text:"Корзина пустая",className:"text-center font-bold my-2"}),(0,r.jsx)("p",{className:"text-center text-neutral-500 mb-5",children:"Добавьте хотя бы один товар, чтобы совершить заказ"}),(0,r.jsx)(y.kN,{asChild:!0,children:(0,r.jsxs)(o.$,{className:"w-56 h-12 text-base",size:"lg",children:[(0,r.jsx)(f,{className:"w-5 mr-2"}),"Вернуться назад"]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"-mx-6 mt-5 overflow-auto flex-1",children:c.map(e=>(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(b,{id:e.id,imageUrl:e.imageUrl,name:e.name,price:Number(e.price),quantity:e.quantity,onClickCountButton:s=>g(e.id,e.quantity,s),onClickRemove:()=>d(e.id),details:e.description})},e.id))}),(0,r.jsx)(y.XW,{className:"-mx-6 bg-white p-8",children:(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"flex mb-4",children:[(0,r.jsxs)("span",{className:"flex flex-1 text-lg text-neutral-500",children:["Итого",(0,r.jsx)("div",{className:"flex-1 border-b border-dashed border-b-neutral-200 relative -top-1 mx-2"})]}),(0,r.jsxs)("span",{className:"font-bold text-lg",children:[t," ₽"]})]}),(0,r.jsx)(j(),{href:"/checkout",children:(0,r.jsxs)(o.$,{onClick:()=>p(!0),disabled:m,type:"submit",className:"w-full h-12 text-base",children:["К оформлению заказа",(0,r.jsx)(h.A,{className:"w-5 ml-2"})]})})]})})]})]})})]})},C=e=>{let{className:s}=e,{totalAmount:t,items:a}=(0,N._)(),i=a.reduce((e,s)=>e+s.quantity,0),[c,d]=(0,l.useState)(!1);return(0,r.jsx)(k,{children:(0,r.jsxs)(o.$,{className:(0,n.cn)("relative group",s),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:()=>d(e=>!e),children:[(0,r.jsxs)("b",{children:[t," ₽"]}),(0,r.jsx)("span",{className:"h-full w-[1px] bg-white/30 mx-3"}),(0,r.jsxs)("div",{className:"flex items-center gap-1 transition duration-300 ".concat(c?"opacity-0":"opacity-100"),children:[(0,r.jsx)(m,{className:"w-4 h-4",strokeWidth:2}),(0,r.jsx)("b",{children:i})]}),(0,r.jsx)(h.A,{className:"absolute right-5 transition duration-300 ".concat(c?"opacity-100 translate-x-0":"opacity-0 -translate-x-2")})]})})},A=e=>{let{categories:s,className:t}=e;return(0,r.jsx)("div",{className:(0,n.cn)("sticky top-0 bg-white py-5 shadow-lg shadow-black/5 z-10",t),children:(0,r.jsx)(a.m,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex-1 overflow-x-auto",children:(0,r.jsx)(d,{items:s})}),(0,r.jsx)("div",{className:"flex-shrink-0 ml-4 hidden md:block",children:(0,r.jsx)(C,{})})]})})})},z=function(e,s){var t=(0,l.useState)(null),r=t[0],a=t[1];return(0,l.useEffect)(function(){if(e.current&&"function"==typeof IntersectionObserver){var t=new IntersectionObserver(function(e){a(e[0])},s);return t.observe(e.current),function(){a(null),t.disconnect()}}return function(){}},[e.current,s.threshold,s.root,s.rootMargin]),r};var E=t(8209),q=t(4683),M=t(5730),_=t(5037),I=t(6467);let S=e=>{let{product:s,onSubmit:t,onClose:l}=e,a=(0,N._)(e=>e.addCartItem),i=async()=>{try{let e={id:s.id,name:s.name,imageUrl:s.image,price:Number(s.price),quantity:1,description:s.description};a(e),_.Ay.success("".concat(s.name," добавлена в корзину")),null==t||t()}catch(e){_.Ay.error("Не удалось добавить товар в корзину"),console.error(e)}finally{}};return(0,r.jsx)(I.T,{product:s,onSubmit:i,onClose:l})},R=e=>{let{id:s,name:t,price:a,imageUrl:n,ingredients:c,className:d}=e,{addCartItem:x,updateItemQuantity:m,removeCartItem:h,items:u}=(0,N._)(),p=u.find(e=>e.id===s),[j,f]=(0,l.useState)(!1),[y,g]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=()=>g(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let v=c.length>20,b=v?c.substring(0,20)+"…":c;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:d,onClick:e=>{e.preventDefault(),f(!0)},style:{cursor:"pointer"},children:[(0,r.jsx)("div",{className:"flex justify-center p-6 bg-secondary rounded-lg h-[260px]",children:(0,r.jsx)("img",{className:"w-[292px] h-[215px] transition-transform duration-300 hover:translate-y-1 rounded-sm",src:n,alt:t})}),(0,r.jsx)(i.h,{text:t,size:"sm",className:"mb-1 mt-3 font-bold"}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:[b," ",v&&(0,r.jsx)("span",{className:"text-primary ml-1 underline",children:"Подробнее..."})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,r.jsx)("span",{className:"text-[20px] font-bold",children:(0,r.jsxs)("b",{children:[Number(a)," ₽"]})}),p?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o.$,{onClick:e=>{e.stopPropagation(),p&&(1===p.quantity?h(s):m(s,p.quantity-1))},variant:"secondary",className:"px-3 py-1 text-primary transition-colors duration-300 hover:bg-primary/30",children:(0,r.jsx)(E.A,{size:16})}),(0,r.jsx)("span",{className:"mx-2 font-bold",children:p.quantity}),(0,r.jsx)(o.$,{onClick:e=>{e.stopPropagation(),p&&m(s,p.quantity+1)},variant:"secondary",className:"px-3 py-1 text-primary transition-colors duration-300 hover:bg-primary/30",children:(0,r.jsx)(q.A,{size:16})})]}):(0,r.jsxs)(o.$,{onClick:e=>{e.stopPropagation(),x({id:s,name:t,imageUrl:n,price:a,quantity:1,description:c})},variant:"secondary",className:"text-primary font-bold transition-colors duration-300 hover:bg-primary/30",children:[(0,r.jsx)(q.A,{size:20,className:"mr-1"}),"Добавить"]})]})]}),j&&!y&&(0,r.jsx)(M.F,{product:{id:s,name:t,price:a.toString(),image:n,description:c,category:""},onClose:()=>f(!1)}),j&&y&&(0,r.jsx)(S,{product:{id:s,name:t,price:a.toString(),image:n,description:c,category:""},onClose:()=>f(!1)})]})},F=e=>{let{title:s,items:t,listClassName:a,categoryId:d,className:o}=e,x=c(e=>e.setActiveId),m=l.useRef(null),h=z(m,{threshold:[.1,.3,.5,.7,1],rootMargin:"-20% 0px -20% 0px"});return l.useEffect(()=>{(null==h?void 0:h.isIntersecting)&&x(d)},[d,null==h?void 0:h.isIntersecting,s]),(0,r.jsxs)("div",{className:o,id:s,ref:m,children:[(0,r.jsx)(i.h,{text:s,size:"lg",className:"font-extrabold mb-5"}),(0,r.jsx)("div",{className:(0,n.cn)("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-[50px]",a),children:t.map(e=>(0,r.jsx)(R,{id:e.id,name:e.name,imageUrl:e.image,price:Number(e.price),ingredients:e.description},e.id))})]})},$=()=>{let{items:e}=(0,N._)(),s=e.reduce((e,s)=>e+s.quantity,0);return(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsx)(k,{children:(0,r.jsx)("div",{className:"fixed bottom-10 right-6 z-50",children:(0,r.jsxs)(o.$,{variant:"outline",className:(0,n.cn)("rounded-full w-14 h-14 flex items-center justify-center","bg-white text-primary"),children:[(0,r.jsx)(m,{size:24,strokeWidth:3}),s>0&&(0,r.jsx)("span",{className:"absolute top-0 right-0 -translate-y-1/2 translate-x-1/2b bg-primary text-white rounded-full text-xs w-5 h-5 flex items-center justify-center",children:s})]})})})})};var O=t(6307);function V(){let[e,s]=(0,l.useState)([]);return(0,l.useEffect)(()=>{(async function(){try{let e=await O.j.products.search({name:""}),t={},r=1;e.forEach(e=>{let s=e.category;s&&(t[s]||(t[s]={id:r++,name:s,image:e.image||"https://example.com/default-category-image.jpg",products:[]}),t[s].products.push(e))}),s(Object.values(t))}catch(e){console.error(e)}})()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.m,{className:"mt-4 md:mt-10",children:(0,r.jsx)(i.h,{text:"Главная",size:"lg",className:"font-extrabold"})}),(0,r.jsx)(A,{categories:e}),(0,r.jsx)(a.m,{className:"mt-4 md:mt-10 pb-14",children:(0,r.jsx)("div",{className:"flex flex-col md:flex-row gap-6 md:gap-[80px]",children:(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("div",{className:"flex flex-col gap-16",children:e.map(e=>e.products.length>0&&(0,r.jsx)(F,{title:e.name,categoryId:e.id,items:e.products},e.id))})})})}),(0,r.jsx)($,{})]})}},8182:(e,s,t)=>{"use strict";t.d(s,{Qr:()=>m,_V:()=>i,R2:()=>a,gm:()=>n});var r=t(5155),l=t(9602);let a=e=>{let{name:s,details:t,className:a}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:(0,l.cn)("flex items-center justify-between",a),children:(0,r.jsx)("h2",{className:"text-lg font-bold flex-1 leading-6",children:s})}),t&&(0,r.jsx)("p",{className:"text-xs text-gray-400 w-[90%]",children:t})]})},i=e=>{let{src:s,className:t}=e;return(0,r.jsx)("img",{className:(0,l.cn)("w-[60px] h-[60px]",t),src:s})},n=e=>{let{value:s,className:t}=e;return(0,r.jsxs)("h2",{className:(0,l.cn)("font-bold",t),children:[Number(s)," ₽"]})};t(2115);var c=t(4683),d=t(8209),o=t(4085);let x=e=>{let{size:s="sm",disabled:t,type:a,onClick:i}=e;return(0,r.jsx)(o.$,{variant:"outline",disabled:t,onClick:i,type:"button",className:(0,l.cn)("p-0 hover:bg-primary hover:text-white disabled:bg-white disabled:border-gray-400 disabled:text-gray-400","sm"===s?"w-[30px] h-[30px] rounded-[10px]":"w-[38px] h-[38px] rounded-md"),children:"plus"===a?(0,r.jsx)(c.A,{className:"sm"===s?"h-4":"h-5"}):(0,r.jsx)(d.A,{className:"sm"===s?"h-4":"h-5"})})},m=e=>{let{className:s,onClick:t,value:a=1,size:i="sm"}=e;return(0,r.jsxs)("div",{className:(0,l.cn)("inline-flex items-center justify-between gap-3",s),children:[(0,r.jsx)(x,{onClick:()=>null==t?void 0:t("minus"),disabled:1===a,size:i,type:"minus"}),(0,r.jsx)("b",{className:"sm"===i?"text-sm":"text-md",children:a}),(0,r.jsx)(x,{onClick:()=>null==t?void 0:t("plus"),size:i,type:"plus"})]})}},3543:(e,s,t)=>{"use strict";t.d(s,{s:()=>i});var r=t(2115),l=t(3360),a=t(5155),i=r.forwardRef((e,s)=>(0,a.jsx)(l.sG.span,{...e,ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));i.displayName="VisuallyHidden"},2884:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},8209:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},4683:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[345,37,451,463,931,763,737,441,517,358],()=>s(1699)),_N_E=e.O()}]);