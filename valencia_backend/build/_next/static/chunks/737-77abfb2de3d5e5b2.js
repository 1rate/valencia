"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[737],{147:(e,t,a)=>{a.d(t,{m:()=>n});var s=a(5155),r=a(9602);a(2115);let n=e=>{let{className:t,children:a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("mx-auto max-w-[1280px] px-4 md:px-8",t),children:a})}},6467:(e,t,a)=>{a.d(t,{T:()=>N});var s=a(5155),r=a(2115),n=a(9847),l=a(9602);let o=e=>{let{shouldScaleBackground:t=!0,...a}=e;return(0,s.jsx)(n._s.Root,{shouldScaleBackground:t,...a})};o.displayName="Drawer",n._s.Trigger;let i=n._s.Portal,d=n._s.Close,c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n._s.Overlay,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80",a),...r})});c.displayName=n._s.Overlay.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(i,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(n._s.Content,{ref:t,className:(0,l.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",a),...o,children:[(0,s.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]})});m.displayName="DrawerContent";let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("grid gap-1.5 p-4 text-center sm:text-left",t),...a})};u.displayName="DrawerHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("mt-auto flex flex-col gap-2 p-4",t),...a})};x.displayName="DrawerFooter";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n._s.Title,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=n._s.Title.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n._s.Description,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});p.displayName=n._s.Description.displayName;var g=a(4085),h=a(689),y=a(3516);let N=e=>{let{product:t,className:a,onClose:n,onSubmit:i}=e,[c,N]=(0,r.useState)(!0),b=()=>{N(!1),setTimeout(()=>{n()},300)};return(0,s.jsx)(o,{open:c,onOpenChange:b,children:(0,s.jsxs)(m,{className:(0,l.cn)("w-full md:h-[70%] bg-white p-4 flex flex-col",a),children:[(0,s.jsx)("div",{className:"absolute top-4 right-4 z-20",children:(0,s.jsx)(g.$,{variant:"ghost",onClick:b,children:(0,s.jsx)(h.A,{className:"w-6 h-6"})})}),(0,s.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,s.jsxs)(u,{children:[(0,s.jsx)(f,{children:(0,s.jsx)("img",{src:t.image,className:"relative top-2 transition-all z-10 duration-300 w-[350px] h-[350px] rounded-sm",alt:t.name})}),(0,s.jsxs)("div",{className:"mt-10 text-left",children:[(0,s.jsx)(y.h,{text:t.name,size:"sm",className:"font-extrabold"}),(0,s.jsx)(p,{children:t.description})]})]}),(0,s.jsx)(x,{children:(0,s.jsx)(d,{asChild:!0,children:(0,s.jsxs)(g.$,{onClick:()=>i?i():b(),children:["Добавить в корзину за ",Number(t.price)," ₽"]})})})]})]})})}},5730:(e,t,a)=>{a.d(t,{F:()=>p});var s=a(5155),r=a(2115),n=a(6217),l=a(689),o=a(9602);let i=n.bL;n.l9;let d=n.ZL;n.bm;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});c.displayName=n.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(n.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[r,(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});u.displayName=n.hE.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});x.displayName=n.VY.displayName;var f=a(7436);let p=e=>{let{product:t,className:a,onClose:r}=e;return(0,s.jsx)(i,{open:!!t,onOpenChange:r,children:(0,s.jsxs)(m,{className:(0,o.cn)("p-0 w-[1060px] max-w-[1060px] min-h-[500px] bg-white overflow-hidden",a),children:[(0,s.jsx)(u,{className:"sr-only",children:"Выберите продукт"}),(0,s.jsx)(x,{className:"sr-only",children:"Форма выбора продукта. Заполните необходимые поля для добавления товара в корзину."}),(0,s.jsx)(f.ProductForm,{product:t,onSubmit:r})]})})}},7436:(e,t,a)=>{a.d(t,{ProductForm:()=>m});var s=a(5155),r=a(2115),n=a(5037),l=a(9602),o=a(3516),i=a(4085);let d=e=>{let{name:t,imageUrl:a,price:r,onSubmit:n,className:d,ingredients:c}=e;return(0,s.jsxs)("div",{className:(0,l.cn)(d,"flex flex-1"),children:[(0,s.jsx)("div",{className:"flex items-center justify-center flex-1 relative w-full",children:(0,s.jsx)("img",{src:a,alt:t,className:"relative transition-all z-10 duration-300 w-full h-[500px] rounded-sm"})}),(0,s.jsxs)("div",{className:"w-[490px] bg-[#f7f6f5] p-7",children:[(0,s.jsx)(o.h,{text:t,size:"md",className:"font-extrabold mb-1"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:c}),(0,s.jsxs)(i.$,{onClick:()=>null==n?void 0:n(),className:"h-[55px] px-10 text-base rounded-[18px] w-full mt-72",children:["Добавить в корзину за ",r," ₽"]})]})]})};var c=a(4205);let m=e=>{let{product:t,onSubmit:a}=e,l=(0,c._)(e=>e.addCartItem),[o,i]=(0,r.useState)(!1),m=async()=>{i(!0);try{let e={id:t.id,name:t.name,imageUrl:t.image,price:Number(t.price),quantity:1,description:t.description};l(e),n.Ay.success("".concat(t.name," добавлена в корзину")),null==a||a()}catch(e){n.Ay.error("Не удалось добавить товар в корзину"),console.error(e)}finally{i(!1)}};return(0,s.jsx)(d,{imageUrl:t.image,name:t.name,onSubmit:m,price:Number(t.price),ingredients:t.description,loading:o})}},3516:(e,t,a)=>{a.d(t,{h:()=>n});var s=a(3463),r=a(2115);let n=e=>{let{text:t,size:a="sm",className:n}=e;return r.createElement({xs:"h5",sm:"h4",md:"h3",lg:"h2",xl:"h1","2xl":"h1"}[a],{className:(0,s.A)({xs:"text-[16px]",sm:"text-[22px]",md:"text-[26px]",lg:"text-[32px]",xl:"text-[40px]","2xl":"text-[48px]"}[a],n)},t)}},4085:(e,t,a)=>{a.d(t,{$:()=>d});var s=a(5155),r=a(2115),n=a(2317),l=a(1027),o=a(9602);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:d=!1,...c}=e,m=d?n.DX:"button";return(0,s.jsx)(m,{className:(0,o.cn)(i({variant:r,size:l,className:a})),ref:t,...c})});d.displayName="Button"},6870:(e,t,a)=>{a.d(t,{CG:()=>c,Fm:()=>g,Qs:()=>N,XW:()=>h,cj:()=>d,h:()=>p,kN:()=>m,qp:()=>y});var s=a(5155),r=a(2115),n=a(6217),l=a(1027),o=a(689),i=a(9602);let d=n.bL,c=n.l9,m=n.bm,u=n.ZL,x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});x.displayName=n.hJ.displayName;let f=(0,l.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=r.forwardRef((e,t)=>{let{side:a="right",className:r,children:l,...d}=e;return(0,s.jsxs)(u,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(n.UC,{ref:t,className:(0,i.cn)(f({side:a}),r),...d,children:[(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]}),l]})]})});p.displayName=n.UC.displayName;let g=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};g.displayName="SheetHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="SheetFooter";let y=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold text-foreground",a),...r})});y.displayName=n.hE.displayName;let N=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});N.displayName=n.VY.displayName},9602:(e,t,a)=>{a.d(t,{cn:()=>n});var s=a(3463),r=a(9795);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},6307:(e,t,a)=>{a.d(t,{j:()=>o});var s={};a.r(s),a.d(s,{search:()=>l});let r=a(2651).A.create({baseURL:"http://127.0.0.1:8000/api"});var n=function(e){return e.SEARCH_PRODUCTS="products/",e.ORDERS="orders/",e}({});let l=async e=>(await r.get(n.SEARCH_PRODUCTS,{params:e})).data,o={products:s}},4205:(e,t,a)=>{a.d(t,{_:()=>l});var s=a(9827),r=a(9208);let n=e=>e.reduce((e,t)=>e+t.price*t.quantity,0),l=(0,s.v)((e,t)=>({items:[],totalAmount:0,loading:!1,addCartItem:async a=>{let s;e({loading:!0});let l=t().items;s=-1!==l.findIndex(e=>e.id===a.id)?l.map(e=>e.id===a.id?{...e,quantity:e.quantity+a.quantity}:e):[...l,a],r.A.set("cartItems",JSON.stringify(s)),e({items:s,totalAmount:n(s),loading:!1})},removeCartItem:async a=>{e({loading:!0});let s=t().items.filter(e=>e.id!==a);r.A.set("cartItems",JSON.stringify(s)),e({items:s,totalAmount:n(s),loading:!1})},updateItemQuantity:async(a,s)=>{e({loading:!0});let l=t().items.map(e=>e.id===a?{...e,quantity:s>0?s:1}:e);r.A.set("cartItems",JSON.stringify(l)),e({items:l,totalAmount:n(l),loading:!1})},clearCart:async()=>{e({loading:!0}),r.A.remove("cartItems"),e({items:[],totalAmount:0,loading:!1})},hydrateCart:async()=>{{e({loading:!0});let t=r.A.get("cartItems"),a=[];if(t)try{a=JSON.parse(t)}catch(e){console.error("Ошибка при парсинге корзины из cookies",e)}e({items:a,totalAmount:n(a),loading:!1})}}}))}}]);